// Generated by CoffeeScript 1.10.0
(function() {
  var waterfall, waterfallPreempt, wheel, wheelTimeout;

  wheelTimeout = 4000;

  waterfallPreempt = 50;

  waterfall = function() {
    return $(".waterfall").each(function(i) {
      var obj, win;
      obj = $(this).offset().top;
      win = $(window).scrollTop() + $(window).height();
      win -= waterfallPreempt;
      if (win > obj) {
        return $(this).animate({
          opacity: 1,
          top: 0
        }, 1000);
      }
    });
  };

  wheel = function(curr) {
    return curr.animate({
      opacity: 0,
      left: "-10em"
    }, {
      duration: 500,
      "queue": false,
      done: function() {
        var next;
        curr.hide();
        if (curr.is($(".wheel").children().last())) {
          next = $(".wheel").children().first();
        } else {
          next = curr.next();
        }
        return next.show().css({
          "opacity": "0",
          "left": "10em"
        }).animate({
          opacity: 1,
          left: 0
        }, {
          duration: 500,
          "queue": false,
          done: setTimeout((function() {
            return wheel(next);
          }), wheelTimeout)
        });
      }
    });
  };

  $(document).ready(function() {
    waterfall();
    setTimeout((function() {
      return wheel($(".wheel").children().first());
    }), wheelTimeout);
    return $(window).scroll(function() {
      return waterfall();
    });
  });

}).call(this);
